# JavaScript的预编译流程

JavaScript是一种解释型的语言， 即编译一行、执行一行， 那么预编译是什么？

## JavaScript运行三部曲

1. 语法分析
2. 预编译
3. 解释执行

所谓**语法分析**就是js引擎通篇检查代码中的语法错误，`解释执行`便是执行代码。
而`预编译`可以理解为在内存中开辟的一些空间， 用来存放一些变量与函数。

## 预编译在什么时候发生

预编译分为**全局预编译**和**函数预编译**， 全局预编译发生在页面加载完成时执行， 而函数预编译发生在函数执行的前一刻。

## 全局预编译

JavaScript 在语法分析完毕后， 会进入全局预编译的流程。 全局预编译可以分为以下四步: 

1. 创建 `GO` (Global Object, 全局执行期上下文， 在浏览器中为window对象)。
2. 寻找 `var` 变量声明， 并赋值为 `undefined`。
3. 寻找 `function` 函数声明， 并赋值为函数体。
4. 执行代码。


## 函数预编译

在函数执行的前一刻， 会进入函数预编译的流程。 函数预编译可以分为以下五步:

1. 创建 `AO` (Activation Object 活跃对象) 函数执行期上下文
2. 寻找 `形参` 和 `var`变量声明， 并赋值为 `undefined`
3. 形参实参统一（把实参的值赋值给形参）
4. 寻找函数声明， 并赋值为函数体
5. 函数执行

**注意: 在预编译的过程中， 只看关键字 `var` 和 `function`， 而if、while、for、 switch不会影响到预编译**

## 实例分析